const data =
  "65|47\n73|27\n73|85\n72|79\n72|75\n72|14\n28|83\n28|85\n28|17\n28|44\n52|15\n52|91\n52|69\n52|67\n52|27\n82|47\n82|16\n82|79\n82|54\n82|57\n82|65\n22|14\n22|45\n22|77\n22|92\n22|83\n22|86\n22|95\n23|73\n23|57\n23|79\n23|75\n23|54\n23|26\n23|32\n23|67\n49|98\n49|57\n49|82\n49|69\n49|47\n49|26\n49|29\n49|73\n49|16\n25|86\n25|26\n25|45\n25|75\n25|62\n25|81\n25|47\n25|22\n25|72\n25|16\n51|62\n51|29\n51|77\n51|79\n51|22\n51|72\n51|46\n51|98\n51|47\n51|86\n51|73\n27|46\n27|82\n27|49\n27|12\n27|51\n27|98\n27|67\n27|17\n27|69\n27|72\n27|91\n27|32\n77|97\n77|44\n77|37\n77|76\n77|15\n77|27\n77|92\n77|23\n77|45\n77|63\n77|52\n77|91\n77|81\n46|47\n46|62\n46|14\n46|54\n46|28\n46|63\n46|52\n46|92\n46|75\n46|86\n46|79\n46|81\n46|22\n46|77\n15|91\n15|83\n15|69\n15|49\n15|37\n15|97\n15|32\n15|44\n15|67\n15|27\n15|82\n15|23\n15|55\n15|51\n15|98\n81|27\n81|14\n81|45\n81|91\n81|37\n81|95\n81|83\n81|52\n81|23\n81|76\n81|15\n81|92\n81|56\n81|36\n81|86\n81|44\n55|36\n55|46\n55|29\n55|69\n55|22\n55|62\n55|67\n55|81\n55|98\n55|77\n55|79\n55|65\n55|25\n55|89\n55|73\n55|16\n55|32\n83|82\n83|79\n83|46\n83|12\n83|98\n83|95\n83|56\n83|37\n83|75\n83|89\n83|51\n83|72\n83|91\n83|49\n83|55\n83|23\n83|67\n83|69\n32|46\n32|14\n32|45\n32|25\n32|54\n32|72\n32|26\n32|29\n32|77\n32|22\n32|47\n32|36\n32|75\n32|89\n32|62\n32|73\n32|98\n32|79\n32|81\n56|54\n56|89\n56|25\n56|67\n56|23\n56|73\n56|49\n56|46\n56|72\n56|51\n56|55\n56|98\n56|65\n56|26\n56|97\n56|12\n56|75\n56|57\n56|32\n56|91\n36|56\n36|14\n36|86\n36|83\n36|45\n36|23\n36|95\n36|28\n36|76\n36|82\n36|85\n36|12\n36|49\n36|63\n36|15\n36|92\n36|44\n36|97\n36|37\n36|27\n36|87\n16|47\n16|87\n16|75\n16|36\n16|62\n16|46\n16|79\n16|77\n16|14\n16|86\n16|73\n16|29\n16|98\n16|28\n16|45\n16|85\n16|65\n16|26\n16|54\n16|52\n16|57\n16|22\n45|17\n45|49\n45|15\n45|56\n45|97\n45|83\n45|91\n45|87\n45|44\n45|86\n45|55\n45|76\n45|95\n45|82\n45|23\n45|28\n45|69\n45|85\n45|27\n45|37\n45|67\n45|52\n45|63\n26|62\n26|57\n26|45\n26|28\n26|54\n26|65\n26|29\n26|81\n26|86\n26|92\n26|14\n26|75\n26|15\n26|27\n26|77\n26|87\n26|85\n26|47\n26|73\n26|79\n26|36\n26|52\n26|63\n26|22\n75|15\n75|81\n75|63\n75|36\n75|52\n75|22\n75|45\n75|17\n75|62\n75|77\n75|87\n75|14\n75|79\n75|54\n75|92\n75|28\n75|27\n75|29\n75|73\n75|47\n75|65\n75|57\n75|86\n75|85\n62|52\n62|81\n62|44\n62|77\n62|86\n62|92\n62|37\n62|22\n62|15\n62|85\n62|29\n62|14\n62|47\n62|95\n62|56\n62|63\n62|36\n62|28\n62|17\n62|76\n62|83\n62|27\n62|87\n62|45\n98|75\n98|92\n98|45\n98|26\n98|46\n98|62\n98|57\n98|22\n98|86\n98|73\n98|28\n98|63\n98|52\n98|54\n98|14\n98|47\n98|77\n98|79\n98|81\n98|85\n98|29\n98|65\n98|36\n98|87\n17|25\n17|72\n17|32\n17|97\n17|49\n17|98\n17|37\n17|23\n17|82\n17|44\n17|76\n17|91\n17|55\n17|67\n17|69\n17|16\n17|51\n17|26\n17|83\n17|89\n17|95\n17|12\n17|46\n17|56\n12|29\n12|54\n12|22\n12|79\n12|26\n12|98\n12|46\n12|62\n12|51\n12|69\n12|32\n12|75\n12|65\n12|73\n12|49\n12|16\n12|55\n12|25\n12|47\n12|67\n12|57\n12|89\n12|72\n12|82\n47|83\n47|44\n47|77\n47|86\n47|95\n47|28\n47|92\n47|52\n47|17\n47|45\n47|56\n47|91\n47|76\n47|81\n47|87\n47|15\n47|14\n47|37\n47|97\n47|36\n47|85\n47|27\n47|23\n47|63\n95|46\n95|72\n95|56\n95|69\n95|75\n95|51\n95|25\n95|97\n95|89\n95|98\n95|26\n95|79\n95|49\n95|91\n95|12\n95|67\n95|23\n95|82\n95|65\n95|32\n95|16\n95|55\n95|73\n95|57\n54|77\n54|52\n54|17\n54|45\n54|62\n54|28\n54|85\n54|83\n54|44\n54|76\n54|63\n54|37\n54|14\n54|27\n54|22\n54|87\n54|86\n54|81\n54|36\n54|95\n54|47\n54|92\n54|29\n54|15\n57|14\n57|15\n57|44\n57|86\n57|92\n57|47\n57|28\n57|76\n57|29\n57|85\n57|36\n57|54\n57|22\n57|77\n57|87\n57|63\n57|81\n57|83\n57|65\n57|62\n57|52\n57|17\n57|27\n57|45\n97|16\n97|55\n97|32\n97|22\n97|75\n97|69\n97|89\n97|46\n97|25\n97|72\n97|73\n97|49\n97|79\n97|57\n97|98\n97|82\n97|26\n97|65\n97|12\n97|91\n97|67\n97|51\n97|62\n97|54\n89|72\n89|81\n89|57\n89|52\n89|29\n89|45\n89|26\n89|22\n89|73\n89|65\n89|75\n89|47\n89|14\n89|79\n89|51\n89|25\n89|98\n89|54\n89|46\n89|62\n89|92\n89|16\n89|36\n89|77\n79|45\n79|62\n79|36\n79|54\n79|44\n79|52\n79|65\n79|47\n79|63\n79|86\n79|57\n79|28\n79|85\n79|27\n79|17\n79|14\n79|92\n79|73\n79|81\n79|77\n79|87\n79|22\n79|29\n79|15\n85|25\n85|12\n85|95\n85|55\n85|32\n85|15\n85|37\n85|83\n85|63\n85|89\n85|69\n85|17\n85|82\n85|97\n85|91\n85|76\n85|44\n85|51\n85|23\n85|87\n85|49\n85|56\n85|67\n85|27\n92|85\n92|56\n92|44\n92|28\n92|27\n92|17\n92|95\n92|76\n92|12\n92|23\n92|67\n92|37\n92|63\n92|91\n92|86\n92|49\n92|82\n92|55\n92|45\n92|87\n92|15\n92|97\n92|52\n92|83\n44|32\n44|23\n44|56\n44|46\n44|91\n44|95\n44|55\n44|76\n44|25\n44|37\n44|82\n44|69\n44|12\n44|89\n44|97\n44|72\n44|83\n44|98\n44|16\n44|51\n44|26\n44|49\n44|75\n44|67\n37|12\n37|55\n37|95\n37|79\n37|69\n37|25\n37|32\n37|75\n37|51\n37|26\n37|67\n37|16\n37|91\n37|49\n37|89\n37|72\n37|57\n37|46\n37|73\n37|23\n37|82\n37|56\n37|97\n37|98\n63|72\n63|32\n63|89\n63|82\n63|12\n63|55\n63|15\n63|25\n63|69\n63|51\n63|97\n63|27\n63|23\n63|83\n63|56\n63|67\n63|17\n63|95\n63|44\n63|49\n63|16\n63|37\n63|76\n63|91\n91|29\n91|65\n91|54\n91|82\n91|62\n91|26\n91|46\n91|32\n91|73\n91|72\n91|75\n91|98\n91|12\n91|49\n91|22\n91|89\n91|69\n91|25\n91|67\n91|55\n91|16\n91|51\n91|79\n91|57\n14|45\n14|91\n14|87\n14|86\n14|15\n14|56\n14|76\n14|97\n14|63\n14|52\n14|92\n14|27\n14|49\n14|83\n14|17\n14|12\n14|95\n14|44\n14|28\n14|55\n14|82\n14|85\n14|37\n14|23\n69|98\n69|73\n69|92\n69|89\n69|14\n69|36\n69|62\n69|47\n69|54\n69|79\n69|57\n69|75\n69|25\n69|22\n69|46\n69|65\n69|32\n69|81\n69|29\n69|72\n69|51\n69|16\n69|26\n69|77\n29|56\n29|14\n29|81\n29|92\n29|28\n29|86\n29|76\n29|95\n29|37\n29|85\n29|97\n29|83\n29|63\n29|17\n29|36\n29|23\n29|15\n29|45\n29|77\n29|44\n29|47\n29|27\n29|87\n29|52\n87|17\n87|49\n87|89\n87|15\n87|67\n87|37\n87|97\n87|82\n87|32\n87|76\n87|44\n87|95\n87|91\n87|63\n87|56\n87|55\n87|25\n87|72\n87|27\n87|83\n87|23\n87|12\n87|51\n87|69\n76|69\n76|72\n76|49\n76|32\n76|26\n76|98\n76|91\n76|16\n76|56\n76|51\n76|37\n76|73\n76|79\n76|82\n76|95\n76|55\n76|23\n76|89\n76|46\n76|67\n76|75\n76|25\n76|12\n76|97\n67|36\n67|79\n67|72\n67|51\n67|32\n67|57\n67|26\n67|73\n67|75\n67|77\n67|16\n67|29\n67|47\n67|25\n67|46\n67|65\n67|54\n67|98\n67|89\n67|81\n67|22\n67|69\n67|14\n67|62\n86|27\n86|87\n86|15\n86|17\n86|97\n86|23\n86|55\n86|56\n86|76\n86|91\n86|32\n86|63\n86|37\n86|95\n86|44\n86|82\n86|69\n86|67\n86|28\n86|85\n86|89\n86|49\n86|12\n86|83\n65|45\n65|14\n65|62\n65|37\n65|52\n65|28\n65|63\n65|29\n65|86\n65|92\n65|15\n65|81\n65|27\n65|83\n65|54\n65|22\n65|44\n65|76\n65|17\n65|77\n65|87\n65|36\n65|85\n73|52\n73|15\n73|77\n73|92\n73|47\n73|17\n73|22\n73|83\n73|45\n73|86\n73|65\n73|44\n73|36\n73|54\n73|57\n73|14\n73|29\n73|28\n73|87\n73|62\n73|63\n73|81\n72|57\n72|92\n72|28\n72|16\n72|86\n72|85\n72|73\n72|98\n72|62\n72|22\n72|29\n72|65\n72|47\n72|36\n72|81\n72|54\n72|46\n72|26\n72|77\n72|52\n72|45\n28|15\n28|69\n28|27\n28|37\n28|97\n28|23\n28|91\n28|32\n28|56\n28|89\n28|63\n28|25\n28|76\n28|12\n28|67\n28|82\n28|87\n28|49\n28|55\n28|95\n52|97\n52|87\n52|95\n52|44\n52|28\n52|49\n52|83\n52|17\n52|76\n52|37\n52|55\n52|82\n52|86\n52|23\n52|56\n52|32\n52|63\n52|85\n52|12\n82|51\n82|32\n82|81\n82|75\n82|25\n82|69\n82|29\n82|55\n82|72\n82|26\n82|73\n82|46\n82|22\n82|62\n82|77\n82|89\n82|67\n82|98\n22|56\n22|87\n22|76\n22|17\n22|52\n22|37\n22|85\n22|27\n22|47\n22|36\n22|29\n22|63\n22|81\n22|28\n22|15\n22|44\n22|23\n23|16\n23|97\n23|51\n23|91\n23|69\n23|82\n23|65\n23|55\n23|62\n23|49\n23|98\n23|72\n23|25\n23|46\n23|89\n23|12\n49|77\n49|65\n49|32\n49|89\n49|46\n49|62\n49|25\n49|55\n49|51\n49|22\n49|54\n49|72\n49|67\n49|79\n49|75\n25|29\n25|54\n25|52\n25|46\n25|77\n25|79\n25|36\n25|65\n25|14\n25|73\n25|98\n25|57\n25|92\n25|51\n51|54\n51|36\n51|92\n51|28\n51|75\n51|65\n51|45\n51|26\n51|81\n51|57\n51|52\n51|16\n51|14\n27|55\n27|76\n27|56\n27|97\n27|25\n27|95\n27|44\n27|37\n27|83\n27|16\n27|23\n27|89\n77|28\n77|86\n77|36\n77|17\n77|12\n77|14\n77|95\n77|87\n77|83\n77|56\n77|85\n46|87\n46|57\n46|85\n46|45\n46|73\n46|65\n46|36\n46|15\n46|29\n46|26\n15|76\n15|17\n15|89\n15|25\n15|12\n15|56\n15|95\n15|72\n15|16\n81|17\n81|49\n81|12\n81|85\n81|87\n81|63\n81|97\n81|28\n55|54\n55|57\n55|75\n55|47\n55|72\n55|26\n55|51\n83|26\n83|16\n83|25\n83|97\n83|76\n83|32\n32|57\n32|92\n32|51\n32|65\n32|16\n56|82\n56|69\n56|16\n56|79\n36|91\n36|17\n36|52\n16|81\n16|92\n45|12\n\n85,27,44,83,37,23,12,49,55,67,25\n51,89,49,25,69,47,16\n92,45,37,27,87,17,36,63,85,86,91\n12,49,82,69,32,89,25,51,72,98,46,26,75,73,57,54,62,22,29\n76,37,95,56,23,97,12,49,82,55,69,32,89,25,51,72,16,98,46,75,79\n23,97,91,12,49,82,55,67,32,89,25,16,98,46,75,79,57,65,54\n49,85,83,87,95,23,56,37,27\n52,86,85,87,63,17,83,76,37,95,56,23,97,91,12,49,82,55,69\n47,79,36,32,69,67,98,25,16\n86,85,87,63,15,27,44,83,76,37,95,56,23,97,91,12,82,55,67,69,32\n17,27,95,44,12,49,91,83,87,63,51,37,67,15,89,56,32,76,25\n98,32,89,55,16,67,79\n54,22,29,81,36,28,87,76,37\n73,92,16,36,46,32,81,72,25\n55,95,63,25,82,32,51,67,89,91,12,17,72,27,56,37,44,15,76\n37,15,56,83,17,91,89,51,12,67,27,72,69,55,44,32,49,76,16\n27,92,29,14,47,28,75,57,45,62,15\n27,36,14,63,22,37,45,62,44,15,52,28,77,47,86,83,81,85,54,17,92\n55,67,51,75,65,47,81\n52,14,36,45,47,51,26,73,29,62,65,98,57,16,92,81,77,46,25\n69,12,32,37,82,23,91,86,87,27,56\n82,55,67,25,46,26,79,73,57,65,54,62,22\n57,65,77,81,85,44,83\n26,75,79,73,65,54,22,47,77,45,52,85,87,63,15\n29,51,14,25,98,16,62,57,81,77,54,65,72,52,26,46,79,47,22,36,75\n51,72,98,46,26,75,79,73,57,65,54,22,29,77,81,92,45,52,86\n97,65,82,62,67,98,32\n63,27,44,76,97,55,72\n16,79,49,51,73,72,91,25,75,12,46,69,26,98,62,97,32,55,89,67,57\n63,12,17,23,82,95,45,15,86,44,37,67,91,85,27\n14,77,63,62,22,92,44,17,27,15,36,52,37,54,81,86,85,87,83,76,45\n97,91,32,89,72,54,62\n47,57,92,73,81,25,72,29,75,22,77,26,36,14,32,46,16,98,54,51,79\n76,27,44,37,86\n23,85,15,87,56,25,82\n55,26,79,77,25,73,29,65,62,69,46,16,75,81,57\n83,76,37,56,97,91,49,82,55,67,89,51,72,16,98,26,75\n67,69,32,73,57,29,36\n82,67,51,16,26,79,57,54,62,22,29\n44,37,95,56,23,97,91,12,82,67,69,89,25,16,98,46,26\n65,54,62,22,29,47,77,81,36,14,92,45,52,28,85,87,63,15,27,17,44,83,76\n65,29,47,77,45,86,27\n44,97,89,49,95,76,15,28,82,17,32\n37,52,76,12,44,45,28,85,97,55,49\n28,14,44,62,47,95,22,15,87,83,45,27,37\n45,27,36,47,52,14,63,44,37,86,15,87,92,56,17\n46,57,65,54,22,81,36,87,63\n22,83,52,56,44,17,14,37,85,81,45,63,95,15,77\n69,26,54,47,81\n51,72,98,75,29,77,36\n14,45,85,27,17\n47,65,77,79,75,54,22,86,26,29,52,72,81,73,51\n27,76,45,29,86,92,37,14,83,87,81,54,22\n81,46,52,73,75,54,45,77,16,29,72,86,65,47,98,51,62,22,92\n16,98,46,26,75,79,73,57,54,62,22,29,77,81,36,14,92,45,52,86,85\n89,83,55,76,56,12,97,37,95,49,69,28,17\n28,36,86,54,73,26,46,98,57,65,72\n69,25,16,98,46,73,57,54,47,36,14\n62,67,81,79,47,22,98,72,51,16,26\n76,82,23,86,56,12,27,55,92,49,87,44,45\n22,63,92,81,86,83,62,47,44,36,95,27,14\n65,87,26,62,79,57,98\n32,89,25,72,16,98,46,26,75,79,73,57,65,54,62,22,29,47,77,81,36,14,92\n51,46,62,92,45,52,86\n17,44,83,76,97,91,49,82,55,67,69,32,25,51,46\n36,14,52,83,37,12,49\n95,92,14,28,17,15,85,52,47,83,76,45,37,27,77\n63,15,27,17,44,83,76,37,95,56,23,97,12,49,67,25,72\n28,85,87,63,15,27,17,44,83,76,37,95,56,23,97,91,12,49,82,55,67,69,32\n16,56,67,49,25,82,98,32,69,37,83,95,97,91,55,72,27,76,17,89,23\n95,23,12,49,55,67,69,32,25,16,98,26,57\n77,85,23,28,15,47,45,95,97\n95,83,47,85,56,86,97,44,77,37,45,36,15,52,14,28,23,63,92,87,27\n57,17,27,83,22,52,36\n76,87,82,17,67,56,95\n14,52,28,87,23,97,91,49,82\n76,95,91,49,89,75,79\n57,65,62,77,81,92,63,27,83\n83,63,85,28,15,67,45,86,37\n89,25,51,72,16,98,46,26,75,79,73,57,65,54,62,22,47,77,81,36,14\n36,45,86,28,85,15,27,44,83,76,95,23,12\n44,83,37,56,23,97,91,12,49,55,67,69,32,89,72,16,98\n69,98,57,67,89,32,73,81,25,62,46,16,54,36,79,47,65\n26,16,72,76,25,56,79\n28,15,73,22,26,14,63,57,52,29,87,54,77,65,36,75,81,92,86,85,47,45,79\n57,65,54,62,22,81,14,92,52,87,63,17,83\n86,47,65,17,77,54,76\n37,28,77,63,15,17,27,97,95,91,56,45,36,76,52,86,92\n62,57,29,79,22,16,28,86,45,77,73,75,36,26,85,81,54,14,47\n95,97,92,63,47,83,23,37,28,52,15,77,56,17,85,86,45\n69,89,16,47,57,79,14,62,73\n56,49,55,67,72,16,26\n97,63,55,91,95,67,86\n27,17,47,44,14\n77,14,47,73,85,22,86,81,62,28,75,36,27\n51,52,86,81,77,57,73,98,79,14,46\n44,15,55,83,92,45,27,95,63\n52,45,81,46,98\n23,52,15,37,76,92,14,45,95,77,86,63,97,44,87,85,81,91,36,56,28,17,27\n77,22,45,81,52,65,92,87,14,17,29,27,83,28,47,15,36\n36,85,14,81,37,95,56,15,86,87,91,44,77,23,76,52,63,17,28,83,97,92,45\n12,69,32,15,63,86,49,44,55,56,87,28,17,76,97,67,82,91,95,37,27,83,23\n44,28,45,57,47,54,73,85,87,36,14,17,92\n55,12,83,56,95,32,27,25,91,44,89,15,16\n81,85,23,56,52,76,92,86,77\n37,95,23,97,91,12,49,82,55,32,89,98,73\n67,16,46,57,22,29,36\n12,49,69,16,75,65,54,62,29\n75,79,54,62,22,47,14,45,63\n82,37,23,44,56,51,69,26,25\n29,32,54,51,72,26,55,46,62,67,25,81,16,47,98,89,69\n67,12,37,69,55,23,16,25,76,17,95,91,44,72,51\n15,27,17,44,76,95,56,97,91,12,82,55,32,89,25,51,16\n25,46,95,73,91,49,26,56,12\n82,44,12,63,83,91,85,49,55,67,25,27,95,32,23\n56,23,97,91,49,55,67,69,32,89,51,72,16,98,46,26,75,79,73,57,65\n46,57,65,54,62,22,47,81,14,92,52\n16,23,95,82,89,76,56,26,46,55,75,97,25,69,83,49,67,12,51,98,32\n29,36,63,92,47,86,45,15,14,62,81,73,54,17,87,85,22\n83,49,37,89,51,95,15,63,32,97,44,91,25,69,55,17,12,82,27\n26,65,73,54,62,87,52,75,29,77,47,92,81\n83,37,56,82,55,67,69,32,89,25,51,98,46,26,75\n91,12,49,82,55,69,32,51,72,98,46,26,75,79,65,62,22\n12,25,83,44,26,49,98,69,37,67,32,56,91,23,82\n32,89,25,51,72,98,46,75,79,73,57,62,29,47,81,14,92\n89,98,14,29,26,65,57,69,77,72,51,47,75,16,73,54,62\n12,49,67,69,89,51,16,46,62,22,29\n98,89,29,67,77\n56,82,49,73,97,12,46\n27,44,37,77,86\n55,25,75,83,69,95,67,37,82\n83,85,92,23,76,15,27,44,95,82,91,49,45\n91,25,79,57,89,54,67,23,55,69,72\n15,27,17,44,83,76,37,95,56,23,91,12,49,82,55,67,69,32,89,25,51,72,16\n44,86,92,55,45,15,76,97,49,27,95,83,37,56,91,63,87,82,85,52,12\n91,83,87,17,14,52,37,56,97,23,45,36,92,86,27\n46,25,69,57,32,65,62,91,82,12,26,97,72,16,73\n79,73,57,65,62,22,29,77,36,14,92,52,86,28,85,87,15,27,17\n22,36,28,62,47,92,86,29,46,77,52\n17,89,27,67,95,72,25,12,55\n83,76,37,95,23,97,69,32,98,26,75\n27,87,52,56,86,76,17,28,85,63,81,36,22,83,45\n83,23,97,82,17,87,85,76,91,52,55,86,63,28,56,37,44,27,95,49,12\n97,82,55,69,32,51,72,98,46,75,79,73,57,65,54\n82,97,56,45,23,95,17,12,85,55,27\n32,89,25,51,16,98,46,26,75,79,73,57,54,47,77,81,14\n92,76,81,77,62,63,87,27,28,47,86,65,15,54,45,44,17,85,83,14,36,29,52\n12,82,32,89,25,51,72,98,46,26,75,57,54,22,29\n15,17,76,95,56,12,49,82,55,67,69,89,25,51,72\n82,16,69,72,46,29,89,51,62,98,55,25,67,75,26,79,47,73,77,65,32\n36,14,92,45,52,86,28,85,63,76,37,95,23,97,49\n12,49,82,55,67,69,32,89,25,51,72,16,46,75,79,73,65,22,29\n37,87,23,14,83,63,45,81,92,47,97,36,86,77,56,17,85,15,95,44,28\n17,44,83,76,37,95,56,97,91,12,49,82,55,67,69,32,89,51,16,98,46\n12,49,82,55,67,69,72,16,26,79,57,65,54,22,29\n76,56,89,16,98\n95,17,81,28,12,56,76\n55,17,25,15,95,12,16\n14,92,28,97,56,91,85,27,86,45,95,37,17,87,76,82,44,49,52,63,15\n87,55,95,86,44,76,69,49,17,63,27,56,23,85,82\n23,12,49,82,55,69,89,25,51,72,98,46,26,79,73,57,54\n85,65,26,45,46,62,75,57,92,79,86,47,77,28,29,36,14,81,22,52,98,73,87\n89,83,76,23,32,63,85,44,56,12,82,25,55\n82,15,23,76,67,69,56,63,37,27,89,12,49,95,72,44,91,55,83\n36,98,62,26,28,14,47\n69,25,97,67,89,46,32,12,16,37,44,26,98,82,72\n22,75,46,26,73,51,29,79,55,81,16,54,65,47,77,62,69,57,67,25,89,32,98\n87,63,15,17,44,76,37,95,56,23,97,91,12,49,82,55,67,69,89,25,51\n54,81,92,45,28,85,87,83,37\n47,75,45,51,46,22,79,57,65,77,73,92,89\n77,73,47,79,98,16,22,62,46,26,57,25,89\n56,23,91,55,32,25,72,16,79,57,65\n95,56,23,91,12,49,82,55,67,69,32,89,25,51,72,16,98,46,26,75,79,73,57\n12,49,55,32,89,72,75,73,65\n98,54,55,26,49,62,32\n85,63,27,44,76,56,23\n55,16,69,62,82,98,26,57,22,49,32,51,47,72,25,54,67,46,79,89,75\n79,73,65,22,47,14,92,45,86,28,87,63,15,27,17\n69,98,25,75,55,76,95,72,82,91,12,56,32,67,46,49,16,37,23\n22,14,47,57,36,85,54,16,52,45,77,81,62,92,46,26,86,28,29\n56,15,44,83,86,97,37,28,82,55,17,23,12,95,49,63,32,67,76,91,27\n77,79,22,36,29,54,25,57,81,62,89,45,92,47,16\n32,63,56,76,49,69,97,67,85,83,44,89,37,23,87\n95,91,51,16,26,75,57\n54,26,23,82,57\n83,63,12,25,82,55,49,51,44,23,15,95,56,76,69,72,37,32,91,27,17\n67,55,63,85,82,12,89,27,25,69,49,32,56,23,37,87,17,83,76,97,95,15,91\n12,57,98,72,82,56,79,97,49,16,32,67,46\n57,54,62,22,47,77,36,92,45,52,86,28,85,63,15,17,83\n69,54,26,89,25,51,62,47,22\n23,91,12,49,16,57,54\n67,91,46,26,22,32,16,51,25,69,79,75,82\n72,16,98,46,26,75,79,73,57,65,54,62,22,29,47,77,81,36,14,92,52,86,28\n27,69,87,95,37,23,32,44,51,63,89\n37,23,82,55,32,89,51,75,73\n79,72,29,73,49,69,54,75,51\n29,47,81,92,86,28,85,87,23\n16,65,98,81,22,73,92\n47,77,81,36,14,92,45,52,86,85,87,63,15,17,44,76,37,95,56,23,97\n16,98,75,65,47,45,52,28,85\n49,55,67,69,32,25,72,46,26,79,73,57,47\n15,79,29,63,81,73,47,85,36,27,22,62,92,14,86,65,75,57,87,54,52\n47,65,54,81,89,79,26,46,14,62,72,22,73,51,16,75,25\n16,98,46,26,75,79,73,57,65,62,22,29,81,36,14,92,45,86,85\n";

export const main = () => {
  const dataArr = data.split("\n\n");

  const rules = dataArr[0].split("\n").map((r) => r.split("|"));
  const updates = dataArr[1].split("\n");

  let totalMiddlePageNr = 0;
  for (let i = 0; i < updates.length; i++) {
    const update = updates[i].split(",");
    let updateInCorrectOrder = true;

    for (let j = 0; j + 1 < update.length; j++) {
      const currNr = update[j];
      const relevantRules = rules.filter((r) => r.includes(currNr));
      for (let k = 0; k < update.length; k++) {
        if (j === k) continue;

        const versus = update[k];
        const rule = relevantRules.find((r) => r.includes(versus));

        const before = rule[0];
        const after = rule[1];

        if (
          (j < k && versus === before) || // [j, k] -> good, [k, j] -> bad
          (j > k && versus === after) // [k, j] -> good, [j, k] -> bad
        ) {
          updateInCorrectOrder = false;
        }
      }
    }

    if (updateInCorrectOrder) {
      // Get middle page number
      totalMiddlePageNr += Number(update[Math.floor(update.length / 2)]);
    }
  }
  console.log(totalMiddlePageNr);
};
