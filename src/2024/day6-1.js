const data =
  ".......#.........#..............#........................#......#....#............................#..#...............#............\n...................#.............................................#...................................#............................\n...............#.................................##.........#..........#.....##...#...#.....#....#..................#.............\n#.............................................#..#.............#..........#.##.............................................#......\n#.........................................................#.....#........................................##.......................\n...........#.......#.#...........#....#.#...#......................................#...........................#...##............#\n........................................................#..#.....................................#..#................#....#...#...\n#.#.....#.........................#...........#.......................................#.......#.....................##............\n.......#..........##.....#........#..................................................#.........................................#.#\n#.#..............#.#.............................#............#....#...............#.........................#............#..#.#.#\n..........................................................#....................................................#..................\n.......................#....#...........#.....................#....#...#.......#..............#.......................#...........\n..............................#..............#.......#....................................#.....................#...#...#.........\n........#.................#...#....##..............#...........................#............................#.................#...\n..................#........................................#......#......................................................#........\n.............#.................#...#..............................................................................#...#...........\n.....................................#..........................................................#.#.#......#.........#............\n..........#...................................................................#.........##.......#..#.............................\n...#.#....................................#..#...........#.......................................................##...............\n........................................................................................................#.........................\n.........#...........#......#..............#........#....................#...#......#.............................................\n........#....#...............#....................#..........#.....................................#......#......#........#.#.....\n........................#..........................#.......#........................#................#......#.....................\n......................................#.........................................#............................#....................\n...................................#.#...#...........#.........................................#.....................#............\n.................#....#.....................................................................#..................#.........#........\n...........#...........................................................#.............................#...............#..#.........\n..#.....................#.........................................................................................................\n....................#....#.#...........................#...........................................#..............#...............\n...#...................................................#.............................................#.........#..........#.......\n.............................###.....#..#..#......................................................................................\n##................#.#.......#..............#.....#...............#..#............#................................................\n......#...............................................#.#..#............................#............#.................#..........\n........................................#.#...................................................#.....#.............................\n#.......#.#.......................#.....#....................................#...................#................................\n...##................................................................................................#.....................#......\n............#.............#..................#.................#..................................................................\n...#..............#..............................................................................#..........#......#..............\n...#..#...#................................................#.....................#......#......................#.......#..........\n.................#..#........#...............#.#................#......##.................#.................................#.....\n#.....#.......#...........................................#..........#..............................#...#.#..#......#.....#.......\n....................................#.........#........#..................#.............................................#.........\n#...............................#........................#.................................................#.....#................\n..#..................................#.......#.....................#..............................................................\n........#...#.....................................#......#..............#..#..#..........................#.#....#.................\n.............#..........#....#................#.......#..........................................#.....#..........................\n.............................................#................................#.........................#...#.....................\n.........#........#...................................................................#.......#....#..............................\n....................................#.......................#..............#...............................#......................\n....#....................#................................#....#...........#.............#........................................\n....#...........#...................#.#..................................................#.....................#..................\n..........#....................#............#.##...#.......#....#...............#.....#...#.........................#.............\n.......#....................................................................................................#.................#...\n...............................................................................#......#.................#...#.....................\n..................#........#..........#..........................................................................#................\n..........................................................................................#.......................................\n.#..#...........#.................................##...........................#.....#...................#..#.....................\n........................#..#..........................................................#............#..................#..........#\n...........#...................................................##...........................#...............................#.....\n........#......................................................................................................#..................\n........#..#............................#..#...........#..............................#......................#.##...........#....#\n........#...#.#..............#...#.....................#....................#.#..............................#....................\n.......................................................#....................................................#..#..................\n...........................................#......................#................#........................#....................#\n.............#...............#................................................................................#...................\n..#...#............#.............#.....#........................#............#....................#...............................\n.....#...................................................................................................................#........\n....................#..#...........#....#.............................................................................#.......#...\n..............#......#.........................#...........#...#...........................................#...#..................\n..............................#.....#.........................................................#......#.#......#...................\n............................................................#...................#.#............................#..................\n.............###.#........................................#........................................................#..............\n......#................................#...............##.........................................................................\n.........#.....#.#.....................#.......................................#...............#..........#....#....#.............\n..............................................#....................................#...........................................#..\n............#.#..........#........#..#.....#.............#..........#............#......#...................##..........#.........\n............#....#...................................#.............................#.........................#....................\n.#..................................#....#.........................................................................#..............\n.........................#...#...#.................#..................#.............#.#...#...............#.......................\n.........#...............................#...........#.............................#...........................#..........#.......\n......#..........................#.............#..........#.......................................................................\n.......#...............#.........#.............#...............................#..................................................\n..#......#....................##...........................................#........................................#.............\n..........................#.....#.......................#...........................................................#.#...........\n..#....................#.............#................................................................#.#.........................\n.........#....................#.....#....#...............#.......................#........#.......................................\n..............#...................................................................#................#...#..........................\n....................#.....#.......#..#......................................#...........#..................................##....#\n.......#.......................................................................#..................................................\n......#.............##..........................#..#......................^.......................................................\n..............................#..........#...................#.................................#.....................#............\n.......................##..........................#.......#..............................#...................................#.#.\n................#....................................................................#...............................#.........#..\n..........................................#......#.....................................#................#........#................\n#......................................#.......................................................#..#...........#...................\n.......#.............#..................#..#...#............#.......#.....#.....#.#...............................................\n.............................#........#.............#.....#.......#...................................#.#..................#......\n.................#......................................................................................#........#..#.............\n........................................................................#..............#.....#..............................#.....\n....#....#..........................................#......##...#....................#...................#..........#.............\n.................##.......................##.#.........#................................................#.........................\n.#..............................................#.........................#.#.#..........#.....................................##.\n............................................................#..........#....#...................................................#.\n....#...........#.............................#.....................#.........#..................#...........................#....\n......#.#.......#..#......#........#..#...................#....#..................................................................\n............#........................................................................................................#............\n.....................................................#..........................................#................#................\n...#.......#..#..............#.............................#....................................#.................................\n.................##.........#........................#....................................#...............#.#.#...................\n................#......#......................#..#..........................................#.....................................\n......#..................................................##.#.#........#...........................#.......................#......\n........................#............#......#.........#.............#.............................................#.....#.##......\n......................#........................................#.......#.........#.................#..#...........#...............\n..#.......#.........##..#.#................................................................................#.........#............\n........................................................................................#............#...........#................\n................#...#....................#..##..#...............#.............................................................#...\n...#........#..........................#.....#..........................#....................................#.........#.......##.\n.................#...........................#.........#......#............................#.....................#................\n...................#..........#....#.......#...................#.............................#..........#.........................\n.......#..............#.................................#.........#....................................#.................#....##.#\n..................................#.......................#....#..#.........................#....................#................\n.....#.........#............#...#.........#........#...................#...#......................#.....#............#............\n#.#....#...#........#................................##..........................#.............................##...#....#........\n.............##..........##...#......#.......#.#................#.#.......................#.............#.........................\n.............#....................................#....................................#..........................................\n..................................#..............................#.......................................#................#.......\n...................#...............#..............................................................................................\n....#........#.................................#........#.....................................#.......#................#........#.\n.................#......#.......................................................##.....#..................#.......................\n...............#.......................#.#........#...........................................#........#..........................\n";

export const main = () => {
  let map = data.split("\n").map((m) => m.split(""));
  const width = map[0].length;
  const height = map.length;
  const originalY = map.findIndex((m) => m.includes("^"));
  const originalX = map[originalY].indexOf("^");
  let direction = "up"; // down, left, right
  let x = originalX,
    y = originalY,
    total = 0;

  while (
    (direction === "up" && y > 0) ||
    (direction === "right" && x + 1 < width) ||
    (direction === "down" && y + 1 < height) ||
    (direction === "left" && x > 0)
  ) {
    if (map[y][x] !== "x") total++;

    map[y][x] = "x";
    if (direction === "up" && map[y - 1][x] !== "#") {
      y--;
    } else if (direction === "up" && map[y - 1][x] === "#") {
      direction = "right";
    }

    if (direction === "right" && map[y][x + 1] !== "#") {
      x++;
    } else if (direction === "right" && map[y][x + 1] === "#") {
      direction = "down";
    }

    if (direction === "down" && map[y + 1][x] !== "#") {
      y++;
    } else if (direction === "down" && map[y + 1][x] === "#") {
      direction = "left";
    }

    if (direction === "left" && map[y][x - 1] !== "#") {
      x--;
    } else if (direction === "left" && map[y][x - 1] === "#") {
      direction = "up";
    }
  }

  console.log(map.map((m) => m.join("")).join("\n"), total);
};
